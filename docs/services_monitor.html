

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Monitor Service &mdash; Traffic Monitor 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Traffic Monitor
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="readme.html">Traffic Monitor</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme.html#getting-started">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Traffic Monitor</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Monitor Service</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="monitor-service">
<h1>Monitor Service<a class="headerlink" href="#monitor-service" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Monitoring services reference.</p>
</div>
<span class="target" id="module-services.monitor_service"></span><p>This is the top level service for a feed.  This service contains
all the information and supporting services that will execute
a feed, display the feed and log its data.</p>
<dl class="py class">
<dt id="services.monitor_service.MonitorService">
<em class="property">class </em><code class="sig-prename descclassname">services.monitor_service.</code><code class="sig-name descname">MonitorService</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">monitor_config</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span><a class="headerlink" href="#services.monitor_service.MonitorService" title="Permalink to this definition">¶</a></dt>
<dd><p>A Monitor is defined as a Detector and a URL video feed.
The class is a thread that will continually run and log
data whether the application is displaying the video
feed or not.</p>
<p>The Monitor will handle getting streaming images from a
url and performing detections.  Since detections cannot be
performed on each frame, the service will determine when
the detector is ready to perform a new detection and only
return detection frames when it is able to.</p>
<p>When running, the feed service will place frames in a queue.
If the frame includes detections, it will also show the
detections in the image frame.  If the application is set to
display the feed from the Monitor, the application can
get the images to display from the queue of images.</p>
<p>The MonitorService runs as a thread.  When the thread starts,
the MonitorService adds itself to the ActiveMonitors singleton.</p>
<p>ActiveMonitors is a class that hold information about active
monitors and its largest task is to provide a source for the
actively running monitors.  The ActiveMonitors class can
also turn on and off a Monitor’s ability to display the visual feed.</p>
<dl class="py method">
<dt id="services.monitor_service.MonitorService.get_config">
<code class="sig-name descname">get_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#services.monitor_service.MonitorService.get_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="services.monitor_service.MonitorService.get_next_frame">
<code class="sig-name descname">get_next_frame</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#services.monitor_service.MonitorService.get_next_frame" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="services.monitor_service.MonitorService.get_trained_objects">
<em class="property">static </em><code class="sig-name descname">get_trained_objects</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">detector_name</span></em><span class="sig-paren">)</span> &#x2192; list<a class="headerlink" href="#services.monitor_service.MonitorService.get_trained_objects" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="services.monitor_service.MonitorService.handle_message">
<code class="sig-name descname">handle_message</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#services.monitor_service.MonitorService.handle_message" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="services.monitor_service.MonitorService.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#services.monitor_service.MonitorService.run" title="Permalink to this definition">¶</a></dt>
<dd><p>This will start the service by calling threading.Thread.start()
Frames will be placed in respective queues.</p>
</dd></dl>

<dl class="py method">
<dt id="services.monitor_service.MonitorService.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#services.monitor_service.MonitorService.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Overriding Threading.start() so that we can test if a monitor service  is already active for
the monitor and set the ‘running’ variable.
:return: A dict with bool ‘success’ and string ‘message’ describing result.</p>
</dd></dl>

<dl class="py method">
<dt id="services.monitor_service.MonitorService.start_service">
<code class="sig-name descname">start_service</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">service_class</span><span class="p">:</span> <span class="n">traffic_monitor.services.service_abstract.ServiceAbstract</span></em><span class="sig-paren">)</span><a class="headerlink" href="#services.monitor_service.MonitorService.start_service" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="services.monitor_service.MonitorService.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#services.monitor_service.MonitorService.stop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="services.monitor_service.MonitorService.stop_service">
<code class="sig-name descname">stop_service</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">service_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#services.monitor_service.MonitorService.stop_service" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="services.monitor_service.MonitorService.toggle_service">
<code class="sig-name descname">toggle_service</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#services.monitor_service.MonitorService.toggle_service" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – ‘field’=service  ‘value’=True or False (for on/start or off/stop)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="id0">
<em class="property">class </em><code class="sig-prename descclassname">services.monitor_service.</code><code class="sig-name descname">MonitorService</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">monitor_config</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd><p>A Monitor is defined as a Detector and a URL video feed.
The class is a thread that will continually run and log
data whether the application is displaying the video
feed or not.</p>
<p>The Monitor will handle getting streaming images from a
url and performing detections.  Since detections cannot be
performed on each frame, the service will determine when
the detector is ready to perform a new detection and only
return detection frames when it is able to.</p>
<p>When running, the feed service will place frames in a queue.
If the frame includes detections, it will also show the
detections in the image frame.  If the application is set to
display the feed from the Monitor, the application can
get the images to display from the queue of images.</p>
<p>The MonitorService runs as a thread.  When the thread starts,
the MonitorService adds itself to the ActiveMonitors singleton.</p>
<p>ActiveMonitors is a class that hold information about active
monitors and its largest task is to provide a source for the
actively running monitors.  The ActiveMonitors class can
also turn on and off a Monitor’s ability to display the visual feed.</p>
<dl class="py method">
<dt id="id1">
<code class="sig-name descname">get_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#id1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="id2">
<code class="sig-name descname">get_next_frame</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="id3">
<em class="property">static </em><code class="sig-name descname">get_trained_objects</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">detector_name</span></em><span class="sig-paren">)</span> &#x2192; list<a class="headerlink" href="#id3" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="id4">
<code class="sig-name descname">handle_message</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id4" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="id5">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id5" title="Permalink to this definition">¶</a></dt>
<dd><p>This will start the service by calling threading.Thread.start()
Frames will be placed in respective queues.</p>
</dd></dl>

<dl class="py method">
<dt id="id6">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id6" title="Permalink to this definition">¶</a></dt>
<dd><p>Overriding Threading.start() so that we can test if a monitor service  is already active for
the monitor and set the ‘running’ variable.
:return: A dict with bool ‘success’ and string ‘message’ describing result.</p>
</dd></dl>

<dl class="py method">
<dt id="id7">
<code class="sig-name descname">start_service</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">service_class</span><span class="p">:</span> <span class="n">traffic_monitor.services.service_abstract.ServiceAbstract</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id7" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="id8">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#id8" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="id9">
<code class="sig-name descname">stop_service</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">service_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id9" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="id10">
<code class="sig-name descname">toggle_service</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id10" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – ‘field’=service  ‘value’=True or False (for on/start or off/stop)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Mark McDonald

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>